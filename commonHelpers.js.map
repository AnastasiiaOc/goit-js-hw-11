{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default getImage;\n\nfunction getImage(image) {\n    // const API_KEY = '42682371-e3b8e1b66bf677808532dae55';\n\n    const API_KEY = '44666739-d0cf1ddb18f9d30146fa54081';\n    const BASE_URL = 'https://pixabay.com/api/';\n    const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: image,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    });\n    console.log(searchParams.toString());\n//fetch always poverne promise\n    return fetch(`${BASE_URL}?${searchParams}`)\n        .then((resp) => {\n        if (!resp.ok) {\n            throw new Error(resp.statusText);\n            //throw is like return that brings us to \"catch\"\n            }\n            return resp.json();\n        }) .catch(error => {\n      alert('Incorrect request!')\n    })\n    //     .then(data => {\n    //     console.log(data)\n    // })\n    //    .catch(error => {\n    //     alert('Incorrect request!')\n    // })  // method responseJSON always poverne promise,that's why we need second \"then\"\n}\n\n\n\n\n// Вітсутня загальна обробка помилок на єтапі запиту у функції getImage\n// Враховуючи вказані критичні питання, завдання не може бути прийняте у його поточному стані. Після того, як критичні помилки будуть вирішені і закоментований код буде вирішений, будь ласка, переісправте для ще однієї оцінки","import getImage from \"./pixabay-api\";\n\nexport default createMarcupGallery;\n\nfunction createMarcupGallery(images) {\n  return images.map((element) => \n        `<li class=\"gallery-item\">\n          <div class=\"gallery-image-tumb\">\n            <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\" />\n            </a>\n          </div>\n            <ul class=\"image-info\">\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Likes</h4>\n                <p class=\"image-info-item-text\">${element.likes}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Views</h4>\n                <p class=\"image-info-item-text\">${element.views}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Comments</h4>\n                <p class=\"image-info-item-text\">${element.comments}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Downloads</h4>\n                <p class=\"image-info-item-text\">${element.downloads}</p>\n              </li>\n            </ul>\n        </li>`).join('');\n};\n\n\n\n\n\n\n\n\n// +++++++++++++++++++DOESN4T WORK+++++++++++++++++++++++++++++\n// export default createMarkup;\n\n// function createMarkup(array) {\n//     return array.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n//        return `<li>\n//         <a class=\"large-image\" href=\"${largeImageURL}\">\n//     <img src=\"${webformatURL}\" alt=\"${tags}\"data-source=\"${largeImageURL}\">\n//         <div class=\"image-info\">\n//                             <ul class=\"image-info-list\">\n//                                 <li class=\"image-item\">\n//                                     <h2 class=\"image-text\">Likes</h2>\n//                                     <p class=\"image-info\">${likes}</p>\n//                                 </li>\n//                                 <li class=\"image-item\">\n//                                     <h2 class=\"image-text\">Views</h2>\n//                                     <p class=\"image-info\">${views}</p>\n//                                 </li>\n//                                 <li class=\"image-item\">\n//                                     <h2 class=\"image-text\">Comments</h2>\n//                                     <p class=\"image-info\">${comments}</p>\n//                                 </li>\n//                                 <li class=\"image-item\">\n//                                     <h2 class=\"image-text\">Downloads</h2>\n//                                     <p class=\"image-info\">${downloads}</p>\n//                                 </li>\n//                             </ul>\n//                         </div>\n//          </li>`;\n//     }).join(\"\");\n// }\n\n\n\n\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport searchImages from './js/pixabay-api';\nimport createMarcupGallery from './js/render-functions';\n\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a',\n    {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\nfunction showMessageError(textMes) {\n    iziToast.error({\n        // iconUrl: iconError,\n        message: textMes,\n        maxWidth: '432px',\n        position: 'topRight',\n        messageSize: 16,\n        backgroundColor: '#ef4040',\n        titleColor: '#FFFFFF',\n        messageColor: '#FFFFFF',\n        theme: 'dark',\n    }); \n}\n\nfunction showGallery(tagImage) {\n   if (tagImage) {\n       form.reset();\n       gallery.innerHTML = '';\n       loader.style.display = 'block';\n       searchImages(tagImage)\n            .then(data => {\n                const arrayImages = data.hits;\n                if (arrayImages.length) {\n                    gallery.innerHTML = createMarcupGallery(arrayImages);\n                    lightbox.refresh();\n                } else {\n                    showMessageError(\n                        'Sorry, there are no images matching your search query. Please try again!');\n                }\n            })\n            .catch((error) => showMessageError(error))\n           .finally(() => loader.style.display = 'none');\n       //  .catch((error) => console.error(error));\n    } \n}\n\nform.addEventListener('submit', event => {\n    event.preventDefault();\n    const tagImage = event.target.elements.search.value;\n    showGallery(tagImage);\n})\n\n\n\n// Завдання #1 вирішено неправильно\n\n// Обробка помилок: Студент додав блок catch у функцію showGallery, що є добре, але загалом є хорошою практикою потенційно логувати помилки в консоль, особливо для розробки, використовуючи щось на кшталт console.error(error).\n// Очищення галереї: Перед додаванням нових результатів, внутрішнє HTML галереї установлюється в порожній рядок, що є правильно. Однак, цей рядок, ймовірно, повинен бути перед додаванням нових зображень, а не умовно заснований на наявності tagImage.\n// Найменування аргументів функцій: Ім'я аргумента tagImage може вводити в оману, якщо воно містить фактичний пошуковий рядок; назва на кшталт searchQuery була б більш описовою та точною.\n// Змішана відповідальність в обробці помилок: Функція showMessageError реалізована для відображення помилок за допомогою iziToast, що є нормально, але її назва натякає, що вона специфічна для ситуацій з помилками, однак, вона також може використовуватися для інформаційних повідомлень або повідомлень про успіх - варто розглянути більш універсальну назву на кшталт showToastMessage.\n//     loader.style.display встановлюється в 'grid' замість 'block' або 'none', що може бути ризиковано без контексту оточуючих CSS.Переконайтеся, що це навмисно і лоадер дійсно має відображатись як сітка.\n\n// Критичні помилки:\n// Вітсутня загальна обробка помилок на єтапі запиту у функції getImage\n// Враховуючи вказані критичні питання, завдання не може бути прийняте у його поточному стані. Після того, як критичні помилки будуть вирішені і закоментований код буде вирішений, будь ласка, переісправте для ще однієї оцінки\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// =============DOESNT WORK===============================================\n// // Описаний у документації\n// import iziToast from \"izitoast\";\n// // Додатковий імпорт стилів\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n// import  createMarkup from \"./js/render-functions\";\n// import getImage from \"./js/pixabay-api\";\n\n// const search = document.querySelector(\".js-search\");\n// const gallery = document.querySelector(\".gallery\");\n// const loader = document.querySelector('.loader');\n\n// // const form = document.querySelector('.form'); = const search\n\n// search.addEventListener(\"submit\", onSearch);\n\n// function onSearch(event) {\n//     event.preventDefault();  \n//   const tagImage = event.currentTarget.elements;\n//     // const searchImage = evt.target.elements.search.value;***\n//   showGallery(tagImage)\n//     //  .then((data) => (gallery.innerHTML = createMarkup(data.gallery)))***\n//     // .catch((err) => console.log(err));***\n// }\n\n// const lightbox = new SimpleLightbox('.gallery a',\n//     {\n//         captionsData: 'alt',\n//         captionDelay: 250,\n//     });\n\n// function errorMsg() {\n//     iziToast.error({\n//                            message: 'Sorry, there are no images matching your search query. Please try again!',\n//                            messageColor: '#FFFFFF',\n//                            backgroundColor: '#B51B1B',\n//                            position: 'center',\n//                        });\n// }\n\n// function showGallery(tagImage) {\n//     if (tagImage) {\n//         search.reset();\n//         gallery.innerHTML = \"\";\n//         loader.style.display = \"block\";\n//         getImage(tagImage)\n//             .then(data => {\n//                 if (data.hits.length === 0) {\n//                     //   if (data.hits.length) {\n//                     errorMsg()\n//                     loader.style.display = \"none\";\n//                     search.reset();\n//                 }\n//                 else\n                \n//                 {\n//                     const result = data.hits;\n//                     gallery.innerHTML = createMarkup(result);\n//                     loader.style.display = \"none\";\n//                     // lightbox = initializeLightbox();***\n//                     // lightbox.refresh();***\n//                     search.reset();\n//                 }\n//             })\n//    .catch((error) => errorMsg(error))\n//             .finally(() => loader.style.display = 'none');\n//     } \n// }\n\n\n// search.addEventListener('submit', event => {\n//     event.preventDefault();\n//     const tagImage = event.target.elements.search.value;\n//     showGallery(tagImage);\n// })\n\n\n"],"names":["getImage","image","API_KEY","BASE_URL","searchParams","resp","error","createMarcupGallery","images","element","form","gallery","loader","lightbox","SimpleLightbox","showMessageError","textMes","iziToast","showGallery","tagImage","searchImages","data","arrayImages","event"],"mappings":"6vBAEA,SAASA,EAASC,EAAO,CAGrB,MAAMC,EAAU,qCACVC,EAAW,2BACXC,EAAe,IAAI,gBAAgB,CACzC,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAK,EACD,eAAQ,IAAIG,EAAa,SAAU,CAAA,EAE5B,MAAM,GAAGD,CAAQ,IAAIC,CAAY,EAAE,EACrC,KAAMC,GAAS,CAChB,GAAI,CAACA,EAAK,GACN,MAAM,IAAI,MAAMA,EAAK,UAAU,EAG/B,OAAOA,EAAK,MACxB,CAAS,EAAG,MAAMC,GAAS,CACrB,MAAM,oBAAoB,CAChC,CAAK,CAOL,CC5BA,SAASC,EAAoBC,EAAQ,CACnC,OAAOA,EAAO,IAAKC,GACb;AAAA;AAAA,4CAEoCA,EAAQ,aAAa;AAAA,kDACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAM1CA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,kDAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA,cAGrD,EAAE,KAAK,EAAE,CACvB,CCvBA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,IAAIC,EAAe,aAChC,CACI,aAAc,MACd,aAAc,GACtB,CAAK,EAEL,SAASC,EAAiBC,EAAS,CAC/BC,EAAS,MAAM,CAEX,QAASD,EACT,SAAU,QACV,SAAU,WACV,YAAa,GACb,gBAAiB,UACjB,WAAY,UACZ,aAAc,UACd,MAAO,MACf,CAAK,CACL,CAEA,SAASE,EAAYC,EAAU,CACxBA,IACAT,EAAK,MAAK,EACVC,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,QACvBQ,EAAaD,CAAQ,EACf,KAAKE,GAAQ,CACV,MAAMC,EAAcD,EAAK,KACrBC,EAAY,QACZX,EAAQ,UAAYJ,EAAoBe,CAAW,EACnDT,EAAS,QAAO,GAEhBE,EACI,0EAA0E,CAElG,CAAa,EACA,MAAOT,GAAUS,EAAiBT,CAAK,CAAC,EACzC,QAAQ,IAAMM,EAAO,MAAM,QAAU,MAAM,EAGvD,CAEAF,EAAK,iBAAiB,SAAUa,GAAS,CACrCA,EAAM,eAAc,EACpB,MAAMJ,EAAWI,EAAM,OAAO,SAAS,OAAO,MAC9CL,EAAYC,CAAQ,CACxB,CAAC"}